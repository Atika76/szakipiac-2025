<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SzakiPiac-2025.hu - Hirdet√©s felt√∂lt√©se</title>
  <link rel="icon" href="https://raw.githubusercontent.com/Atika76/szakipiac-2025/main/logo.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #f8fafc; }
    .alert { display: none; }
  </style>
</head>
<body class="min-h-screen flex flex-col">

  <!-- üî∏ Fejl√©c -->
  <header class="bg-yellow-500 shadow">
    <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="/" class="flex items-center space-x-2">
        <img src="https://raw.githubusercontent.com/Atika76/szakipiac-2025/main/logo.png" alt="logo" class="w-10 h-10">
        <span class="text-xl font-bold text-gray-800">SzakiPiac-2025.hu</span>
      </a>
      <nav class="space-x-6 hidden md:block">
        <a href="/" class="font-medium hover:text-white">F≈ëoldal</a>
        <a href="/rolunk.html" class="font-medium hover:text-white">R√≥lunk</a>
        <a href="/kapcsolat.html" class="font-medium hover:text-white">Kapcsolat</a>
        <a href="/feltoltes" class="font-bold text-white">Hirdet√©s felt√∂lt√©se</a>
      </nav>
    </div>
  </header>

  <!-- üìù Hirdet√©s felt√∂lt√©s -->
  <main class="flex-1 max-w-6xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Hirdet√©s felt√∂lt√©se</h1>
    <p class="mb-6 text-gray-600">T√∂ltsd ki az ≈±rlapot, vagy haszn√°ld az AI seg√©det!</p>

    <!-- AI Seg√©d k√°rtya -->
    <div class="bg-white rounded-xl p-6 shadow mb-8">
      <h2 class="text-xl font-semibold mb-4 text-indigo-600">‚ú® AI Hirdet√©s Seg√©d</h2>
      <div class="flex flex-col md:flex-row gap-4">
        <input
          id="keywords"
          type="text"
          placeholder="√çrd be a kulcsszavakat (pl. fest√©s, burkol√°s...)"
          class="flex-1 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400"
        />
        <button
          onclick="generateAd()"
          class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition"
        >
          Sz√∂veg gener√°l√°sa
        </button>
      </div>
    </div>

    <!-- Hibajelz√©s -->
    <div id="errorAlert" class="alert bg-red-500 text-white px-4 py-3 rounded mb-4"></div>

    <!-- Form -->
    <form class="bg-white p-6 rounded-xl shadow space-y-4">
      <div>
        <label class="block font-medium mb-1 text-gray-700">C√≠m</label>
        <input
          id="title"
          type="text"
          placeholder="Pl.: Profi fest√©s kedvez≈ë √°ron"
          class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400"
        />
      </div>
      <div>
        <label class="block font-medium mb-1 text-gray-700">Le√≠r√°s</label>
        <textarea
          id="description"
          rows="5"
          placeholder="√çrd le r√©szletesen a szolg√°ltat√°sodat..."
          class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400"
        ></textarea>
      </div>
      <div>
        <label class="block font-medium mb-1 text-gray-700">Telefonsz√°m (opcion√°lis)</label>
        <input
          type="text"
          placeholder="+36 30 123 4567"
          class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400"
        />
      </div>
      <div>
        <label class="block font-medium mb-1 text-gray-700">Weboldal (opcion√°lis)</label>
        <input
          type="text"
          placeholder="https://"
          class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400"
        />
      </div>
      <button
        type="submit"
        class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition"
      >
        Hirdet√©s felt√∂lt√©se
      </button>
    </form>
  </main>

  <!-- ü¶∂ L√°bl√©c -->
  <footer class="bg-gray-800 text-white py-6 text-center">
    <p>¬© 2025 SzakiPiac-2025.hu | Minden jog fenntartva.</p>
  </footer>

  <!-- ‚ú® AI gener√°l√°s script -->
  <script>
    async function generateAd() {
      const keywords = document.getElementById('keywords').value.trim();
      const errorAlert = document.getElementById('errorAlert');

      if (!keywords) {
        errorAlert.innerText = 'K√©rlek adj meg kulcsszavakat!';
        errorAlert.style.display = 'block';
        return;
      }

      errorAlert.style.display = 'none';

      try {
        const response = await fetch(
          "https://bxtpnotswnwrbycvfypz.supabase.co/functions/v1/generate-ad",
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ keywords }),
          }
        );

        if (!response.ok) {
          throw new Error(`Hiba: ${response.status}`);
        }

        const data = await response.json();
        document.getElementById('title').value = data.title || 'AI gener√°lt hirdet√©s';
        document.getElementById('description').value = data.description || 'Nem √©rkezett sz√∂veg.';

      } catch (error) {
        console.error(error);
        errorAlert.innerText = 'Hiba t√∂rt√©nt a gener√°l√°s sor√°n. Pr√≥b√°ld √∫jra!';
        errorAlert.style.display = 'block';
      }
    }
  </script>
</body>
</html>
