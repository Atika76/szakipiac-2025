// ===== KREATÍVABB, VÁLTOZATOSABB SABLON ALAPÚ FUNKCIÓ =====
function generateAdContent() {
    const keywordsInput = document.getElementById("gemini-keywords");
    const keywords = keywordsInput.value;
    const generateBtn = document.getElementById("generate-ad-btn");
    const originalBtnContent = generateBtn.innerHTML;

    if (!keywords.trim()) {
        showToast("Kérlek, adj meg kulcsszavakat!", "error");
        return;
    }

    // Töltő állapot mutatása
    generateBtn.disabled = true;
    generateBtn.innerHTML = `<div class="gemini-loader"></div><span class="ml-2">Generálás...</span>`;

    setTimeout(() => {
        // --- SZÖVEGKÉSZLETEK (EZEKET SZABADON BŐVÍTHETED!) ---

        const cimKezdetek = ["Professzionális", "Megbízható", "Szakértő", "Gyors és precíz", "Minőségi"];
        
        const nyitoMondatok = [
            "Vállalom {szakma} munkálatok teljes körű elvégzését {helyseg} területén.",
            "Több éves tapasztalattal rendelkezem {szakma} területén, {helyseg} és környékén.",
            "Ha megbízható szakembert keres {szakma} feladatra, jó helyen jár.",
            "Szolgáltatásaimmal az Ön rendelkezésére állok {helyseg} vonzáskörzetében."
        ];

        const erossegek = [
            "rövid határidővel",
            "garanciával",
            "kiváló minőségben",
            "versenyképes árakon",
            "ingyenes helyszíni felméréssel",
            "precíz, tiszta munkavégzéssel",
            "kizárólag minőségi anyagokkal"
        ];

        const zaroMondatok = [
            "Keressen bizalommal a részletekért!",
            "Várom megtisztelő megkeresését!",
            "Kérjen ingyenes árajánlatot még ma!",
            "Hívjon most, és egyeztessünk időpontot!"
        ];

        // --- LOGIKA ---

        // Kulcsszavak feldolgozása
        const parts = keywords.split(',').map(part => part.trim());
        const szakma = parts[0] || "szolgáltatás";
        const capitalizedSzakma = szakma.charAt(0).toUpperCase() + szakma.slice(1);
        const helyseg = parts[1] || "az Ön otthonában";

        // Véletlenszerű elemek kiválasztása
        const valasztottCimKezdet = cimKezdetek[Math.floor(Math.random() * cimKezdetek.length)];
        const valasztottNyito = nyitoMondatok[Math.floor(Math.random() * nyitoMondatok.length)];
        const valasztottZaro = zaroMondatok[Math.floor(Math.random() * zaroMondatok.length)];

        // Erősségek megkeverése és 2-3 kiválasztása
        const kevertErossegek = erossegek.sort(() => 0.5 - Math.random());
        const valasztottErossegekSzama = Math.floor(Math.random() * 2) + 2; // 2 vagy 3 db
        const valasztottErossegek = kevertErossegek.slice(0, valasztottErossegekSzama).join(", ");

        // Szöveg összeállítása
        const generaltCim = `${valasztottCimKezdet} ${szakma} ${helyseg} területén!`;
        const generaltLeiras = 
            `${valasztottNyito.replace('{szakma}', szakma).replace('{helyseg}', helyseg)} ` +
            `Munkámat ${valasztottErossegek} végzem. ` +
            `${valasztottZaro}`;

        // Mezők kitöltése
        document.getElementById("cim").value = generaltCim;
        document.getElementById("leiras").value = generaltLeiras;
        
        showToast("Kreatív javaslat generálva!", "success");

        // Gomb visszaállítása
        generateBtn.disabled = false;
        generateBtn.innerHTML = originalBtnContent;
    }, 500);
}
